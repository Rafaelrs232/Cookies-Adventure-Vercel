<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie’s Adventure: La Venganza del Horno</title>
    <link rel="stylesheet" href="estilos.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka&display=swap" rel="stylesheet">
    
</head>
<body>
    <header>
        <nav class="navbar">
            <ul>
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#informacion">Información</a></li>
                <li><a href="#imagenes">Imágenes</a></li>
                <li><a href="#descargar">Descargar</a></li>
                <li><a href="#ayuda">Ayuda</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="inicio" class="seccion">
            <h1>¡Bienvenido a Cookie’s Adventure!</h1>
            <p>Acompaña a Marby en una dulce y peligrosa misión para salvar a sus amigos.</p>
        </section>

        <section id="informacion" class="seccion">
            <h2>Información</h2>
        
            <p style="max-width: 800px; margin: 0 auto; text-align: left;">
                <strong>Cookie’s Adventure: La Venganza del Horno</strong> es un juego de plataformas en 2D con niveles llenos de desafíos, enemigos de repostería y aventuras deliciosas.
            </p></section>
        
            <ul style="text-align: left; max-width: 800px; margin: 0 auto;">
                <li>
                    Este proyecto consiste en un videojuego de plataformas en 2D llamado <strong>Cookie’s Adventure: La Venganza del Horno</strong>.
                    Los jugadores controlan a Marby, una valiente galleta, que debe recorrer distintos niveles para rescatar a sus amigos y derrotar a un Chef malvado.
                </li>
                <li>
                    El juego permitirá a los usuarios saltar, correr y esquivar obstáculos, enfrentarse a enemigos y recoger mejoras para avanzar en la historia.
                    Tendrá diferentes escenarios inspirados en una pastelería, como montañas de azúcar y ríos de chocolate.
                </li>
                <li>
                    Será una opción de entretenimiento accesible para personas de todas las edades. Inicialmente se podrá jugar en Windows y más adelante en móviles.
                    La jugabilidad sencilla y niveles progresivos lo hacen ideal tanto para principiantes como para jugadores experimentados.
                </li>
                <li>
                    Buscamos ofrecer un juego divertido y adictivo que combine desafíos de plataformas con una historia creativa y personajes carismáticos.
                </li>
            </ul>
        </section>

        <section id="imagenes" class="seccion">
            <h2>Imágenes</h2>
            <img src="FondoMenu.png" alt="Captura del juego" class="imagen-juego">
        </section>

        <section id="descargar" class="seccion">
            <h2>Descargar</h2>
            <p>Próximamente disponible para Windows. ¡Estén atentos!</p>
        </section>

        <section id="ayuda" class="seccion">
            <h2>Ayuda</h2>
            <p>¿Tienes dudas o problemas? Contáctanos en soporte@cookiesadventure.com</p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Cookie’s Adventure. Todos los derechos reservados.</p>
        <p>Desarrollado por Rafael Gómez Benítez.</p>
        <p>Centro de estudios FOC</p>
        <p>Curso Academico 24-25</p>
    </footer>

    <!-- Codigo BBDD -->
    <section id="subida" class="seccion">
        <h2>Sube tu archivo</h2>
        <input type="file" id="fileInput">
        <button onclick="uploadFile()">Subir archivo</button>
        <p id="mensaje"></p>
    </section>
    
    <script type="module">
      import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
    
      const supabaseUrl = 'https://TU_PROYECTO.supabase.co'
      const supabaseKey = 'TU_CLAVE_ANON_PUBLICA'
      const supabase = createClient(supabaseUrl, supabaseKey)
    
      async function uploadFile() {
        const file = document.getElementById('fileInput').files[0]
        const mensaje = document.getElementById('mensaje')
    
        if (!file) {
          mensaje.textContent = 'Por favor, selecciona un archivo primero.'
          return
        }
    
        const tipo = file.type.includes('zip') ? 'zip' : 'foto'
    
        // 1. Subir a Supabase Storage
        const { data, error } = await supabase.storage
          .from('uploads')  // Nombre del bucket
          .upload(`public/${file.name}`, file, {
            cacheControl: '3600',
            upsert: false
          })
    
        if (error) {
          mensaje.textContent = 'Error al subir el archivo: ' + error.message
          return
        }
    
        // 2. Obtener URL pública
        const url = `${supabaseUrl}/storage/v1/object/public/uploads/public/${file.name}`
    
        // 3. Insertar en la tabla `archivos`
        const insertResult = await supabase
          .from('archivos')
          .insert([
            {
              nombre_archivo: file.name,
              tipo: tipo,
              url: url
            }
          ])
    
        if (insertResult.error) {
          mensaje.textContent = 'Archivo subido, pero error al guardar en la base de datos: ' + insertResult.error.message
        } else {
          mensaje.textContent = 'Archivo subido y guardado correctamente.'
        }
      }
    </script>
    
</body>
</html>
